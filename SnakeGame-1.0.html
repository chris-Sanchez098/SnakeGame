<canvas id="canvas" width="300" height="300"></canvas>
<script src="web-lib/processing.js"></script>
<script src="web-lib/functional-light.js"></script>

<script>
//Vamos a usar http://processingjs.org/
// o https://p5js.org/reference/
// Importamos las librerias
let { append, cons, first, isEmpty, isList, length, rest } = functionalLight;

function make(data, attribute) {
  return Object.assign({}, data, attribute);
}

function sketchProc(processing) {
/**
* Esto se llama antes de iniciar el juego
*/
processing.setup = function () {
processing.frameRate(60);
processing.size(400, 400);
processing.background(15, 200, 50);
processing.state = { x: 50, y: 50, ancho: 50, alto: 50 };
}

// Dibuja algo en el canvas. Aqui se pone todo lo que quieras pintar
processing.drawGame = function (game) {
processing.background(10, 200, 50);
processing.fill(240, 240, 240);
processing.rect(50,50, 50,50);
processing.rect(100,50,50,50)
}

// Esta es la función que pinta todo. Se ejecuta 60 veces por segundo. 
// No cambie esta función. Su código debe ir en drawGame
processing.draw = function () {
processing.drawGame(processing.state);
processing.state = processing.onTic(processing.state);
};
/**
* Actualiza el mundo en cada tic del reloj. Retorna el nuevo stado del mundo
*/
processing.onTic = function (game) {
return make(game, {});
}
/**
* Actualiza el mundo cada vez que se oprime una tecla. Retorna el nuevo stado del mundo
*/
processing.onKeyEvent = function (game, keyCode) {
switch (keyCode) {
case processing.UP:
return make(game, { y: game.y - 10 });
break;
case processing.DOWN:
return make(game, { y: game.y + 10 });
break;
case processing.LEFT:
return make(game, { x: game.x - 10 });
break;
case processing.RIGHT:
return make(game, { x: game.x + 10 });
break;
case 107:
return make(game, { alto: game.alto + 5 });
break;
case 109:
return make(game, { alto: game.alto - 5 });
break;
default:
console.log(keyCode);
return make(game, {});
}
}
// Esta función se ejecuta cada vez que presionamos una tecla. 
// No cambie esta función. Su código debe ir en onKeyEvent
processing.keyPressed = function () {
processing.state = processing.onKeyEvent(processing.state, processing.keyCode);
}

var canvas = document.getElementById("canvas");
// Adjuntamos nuestro sketch al framework de processing
var processingInstance = new Processing(canvas, sketchProc);
</script>
